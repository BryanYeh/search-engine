<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="Piazza is redesigning the way students and instructors ask for and receive help online. Say goodbye to clunky forums and newsgroups and say hello to Piazza. You'll wonder how you ever lived without it." />
    <meta name="keywords" content="classroom,homework,help,q&a,question and answer,school,university" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<link rel="stylesheet" href="https://dvngeac8rg9mb.cloudfront.net/css/splash.css?v=959" type="text/css" />
	<link rel="stylesheet" href="/css/splash/signup.css?v=959" type="text/css" />

	<title>Piazza - The New Way to Q&amp;A, For Classrooms</title>
	<script type="text/javascript" src="https://dvngeac8rg9mb.cloudfront.net/javascripts/jquery-1.4.2.min.js"></script>
    <script type='text/javascript' src='https://dvngeac8rg9mb.cloudfront.net/javascripts/jquery.blockUI.js'></script>
    <script type='text/javascript' src='https://dvngeac8rg9mb.cloudfront.net/javascripts/json2.js'></script>
    <script type='text/javascript' src='https://dvngeac8rg9mb.cloudfront.net/piazzza_js/tools.js?v=959' ></script>
		<script type="text/javascript" src="/piazzza_js/ajax.js?v=959"></script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21514163-1']);
  _gaq.push(['_setDomainName', 'piazza.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
  <script type="text/javascript">
    PA.ajaxLogin = false; // no need to login automatically through ajax for this page

    var allSchools = [];//null;
    var total = 0;
    var lastSearch = "";
    var lastText = "";
    var inCall = false;
    var fields = [];
    var choice = [];
    var sendEvents = false;
    var lastEmpty = 0;
    var addEmail = false;
    var domain = "";

    $(window).unload(function() {
      if (sendEvents || choice.length > 0) {
        var h = {};
        var data = [];
        for (i = 0; i < fields.length; i++) {
          var str = fields[i] + "=" + $('#'+fields[i]).val();
          data.push(str);
        }
        for (i = 0; i < choice.length; i++)
          data.push(choice[i]);
        PA.trackEvent(false, "form", "/school-search/", data);
      }
    });

		$('.searchResult').live('click', function(){
			 PA.trackEvent(false, "link_to_class_search", "/school-search/", {"searchedWith" : "school_name"});
		});

    $(document).ready(function() {

      $('input[type="text"], textarea').each(function () {
        var placeholderText = $(this).attr('placeholder');
        if (placeholderText) {
          //if ($(this).val().length == 0) {
            $(this).addClass('placeholder');
            $(this).val($(this).attr('placeholder'));
          //}
          $(this).focus(function () {
            if ($(this).hasClass('placeholder')) {
              $(this).val('');
              $(this).removeClass('placeholder');
            }
          });
          $(this).blur(function () {
            if ($(this).val().length == 0) {
              $(this).addClass('placeholder');
              $(this).val($(this).attr('placeholder'));
              if ($(this).attr("id") == "step1_school_email")
                $('#continue-button').hide();
            }
          });
        }
      });

      $('.form-error').html('').hide();
      $('.input-container').removeClass('error');
      $('#inst_message').click(function(){ window.location = '/instructors/school-search'; });
      $('#step1_school_email').change(function(){$('#continue-button').show();});
      $('#step1_school_email').keydown(function(){$('#continue-button').show();});
      var elems = ['#school-name','#email-pattern'];
      for (i = 0; i < elems.length; i++) {
        $(elems[i]).focus(function() {
          fields.push(this.id);
        });
      }
      var chk = ['#terms-check','#with-no-email'];
      for (i = 0; i < chk.length; i++) {
        $(chk[i]).click(function() {
          fields.push(this.id);
        });
      }
      var whch = ['#step1_school_email','#search-text'];
      for (i = 0; i < whch.length; i++) {
        $(whch[i]).focus(function() {
          choice.push(this.id);
        });
      }
      //pageTracker._setCustomVar(1, "loggedIn?", "false", 2);
      _gaq.push(['_setCustomVar', 1, "loggedIn?", 'no', 2]); //new GA tracking
      _gaq.push(['_trackPageview']); //new GA tracking
      //pageTracker._trackPageview("prof_school_search");  //old GA tracking
      _gaq.push(['_trackPageview', 'stud_school_search']); //new GA tracking

/*      $('.input-container input[type=text]').click(function() {
        var self = $(this).closest('.input-container');
        if (!self.hasClass('active')) {
          $('.input-container').removeClass('active');
          if (!self.hasClass('checkbox')) {
            self.addClass('active');
          }
        }
      });*/
      activateColumnFading();

      // event handler for typing in search box
      $('#search-text').bind('keyup', function(e) {
        var keyCode = e.which;
        if(keyCode === 13 || keyCode === 40 || keyCode === 38) {
          var $selected = $(this).closest('.autosuggest').find('li.keypress-selected');
          if(keyCode === 13) { // enter
            // ignore if there is no content yet
            if($(this).val().length < 1) {
              return;
            }

            if($selected.length === 1) {
              $selected.click();
            } else {
              // if there currently is only one li, click it
              var $lis = $(this).closest('.autosuggest').find('li');
              if($lis.length === 1) {
                $lis.click();
              }
            }
          } else if(keyCode === 38) { // up arrow
            var $prev = $selected.prev('li');
             if($prev.length === 1) {
              $selected.removeClass('keypress-selected');
              $prev.addClass('keypress-selected');
            }
          } else if(keyCode === 40) { // down arrow
            if($selected.length === 0) {
              $(this).closest('.autosuggest').find('ul.autosuggest-results li').first().addClass('keypress-selected');          
            } else {
              var $next = $selected.next('li');
              if($next.length === 1) {
                $selected.removeClass('keypress-selected');
                $next.addClass('keypress-selected');
              }
            }
          }
          $(this).find('.keypress-selected').focus();
          e.preventDefault();
          return false;
        } else {
          filterSearch($(this).val());
          return true;
        }
      });
    });
    function activateColumnFading() {
      var schoolEmailColumnID  = 'SchoolEmailColumn';
      var schoolSearchColumnID = 'SchoolSearchColumn';

      $('#select_your_school .column input[type="text"]').focus(function() {
        var thisColumnID = $(this).closest('.column').attr('id');
        var otherColumnID;
        if (thisColumnID == schoolEmailColumnID) {
          otherColumnID = schoolSearchColumnID;
          $('#' + schoolEmailColumnID).find('button').removeAttr('disabled');
        } else {
          otherColumnID = schoolEmailColumnID;
          $('#' + schoolEmailColumnID).find('button').attr('disabled', 'disabled');
        }
        setOpacity(thisColumnID,  1.0);
        setOpacity(otherColumnID, 0.4);
      });
    }
    function setOpacity(elemID, opacity) {
      var obj = $('#' + elemID);
      obj.css({'opacity': opacity});
    }

    var schoolBlackList = ["Piazza Trial University"]

    function showSchools(term) {
      var result = allSchools.map(function(school) {
        var reg = new RegExp(term, 'i');
        if (school.name && school.name.match(reg) && !schoolBlackList.exist(school.name)) {
          // highlight matched stuff
          var obj = {name:school.name, cnt:school.cnt, email:school.email};
          var reg = new RegExp(term, 'ig');
          obj.name = obj.name.replace(reg, '<strong>$&</strong>');
          return obj;
        }
        return false;
      });
      //result = result.sort(function(a,b) { return (b.cnt - a.cnt) });
      var html = "";
      for (var i = 0; i < result.length; i++) {
        html += '<li onclick="window.location = \'/' + result[i].email + '\';" class="searchResult"><div class="autosuggest-count">' + result[i].cnt + ' Classes</div>';
        html += '<span class="autosuggest-school-name"><a href="#" onclick="return false;">' + result[i].name + '</a></span>';
        html += '</li>';
      }
      if (result.length >= 25) {
        html += '<li class="small" style="text-align: center; color: #aaa;">... and ' + (total - 25) + ' more schools ...</li>';
      }
      html += '<li class="small" style="text-align: center; color: #aaa;">&nbsp;</li>';
      $('.autosuggest-results').html(html);
      $('.autosuggest-box').show();
      $('.autosuggest-input').text(term);
      if (term != lastText) {
        var lookFor = lastText;
        PA.call_pj("network.filter_schools", {name:lookFor}, 1, function(data) {
          allSchools = data.list;
          total = data.total;
          lastSearch = lookFor;
          showSchools(lookFor);
        });
      } else {
        if (result.length == 0 && (new Date()).getTime() - lastEmpty > 10000) {
          var data = {}
          data["searched"] = $('#search-text').val();
          PA.trackEvent(true, "no_schools", "/school-search/", data);
          lastEmpty = (new Date()).getTime();
        }
        inCall = false;
      }
    }
    function filterSearch(str) {
      lastText = str;
      if (!str) {
        $('.autosuggest-box').hide();
      } else {
        if (!inCall) {
          var term = str;
          if (str.length > 0 && lastSearch.length > 0 && str.indexOf(lastSearch) == 0 && allSchools.length < 25) {
            showSchools(term);
            return;
          }
          PA.call_pj("network.filter_schools", {name:term}, 1, function(data) {
            allSchools = data.list;
            total = data.total;
            lastSearch = term;
            showSchools(term);
          });
        }
      }
    }
    function showCreateSchool() {
      $('.form-error').html('').hide();
      $('.input-container').removeClass('error');
      $('#select_your_school').slideUp();
      $('#class-header, #welcome_message').hide()
      $('#create_school').show();
      $('#school-name').val($('#search-text').val());
      $('#email-pattern').focus();
      sendEvents = true;

      PA.trackEvent(true, "create_school_shown", "/school-search/");
      $('.autosuggest-box').hide();
      return false;
    }
    function createSchoolCancel() {

      $('.form-error').html('').hide();
      $('.input-container').removeClass('error');
      $('#select_your_school').show();
      $('#create_school').slideUp();
      $('#class-header, #welcome_message').show();
      $('#search-text').focus();
      fields.push("create_school_cancel");
      return false;
    }

    function createSchool() {

      $('.form-error').html('').hide();
      $('.input-container').removeClass('error');
      var emptyFields = '';
      var agreeTerms = '';
      if (!$('#terms-check').attr('checked')) {
        agreeTerms = 'Please agree to our terms and conditions. ';
         $('#terms-check').closest('.input-container').addClass('error');
      }
      var has_email = true;
      if ($('#with-no-email').attr('checked'))
        has_email = false;

      if  (($('#school-name').val() == "e.g. My University") || ($('#school-name').val() == "")){
        $('#school-name').closest('.input-container').addClass('error');
        emptyFields = 'Please enter a school name. ';
      }

      if(has_email && $('#email-pattern').val() == 'e.g. myschool.edu'){
        $('#email-pattern').closest('.input-container').addClass('error');
        emptyFields += 'Please enter a valid email domain. ';
      }
      if ((emptyFields + agreeTerms) != '') {
        $('.form-error').html(emptyFields + agreeTerms).show();
        return false;
        }




      PA.call_pj("network.new_school", {school:$('#school-name').val(), email:$('#email-pattern').val(), has_email:has_email}, null, function(em){
        if (addEmail)
          em = em + "?email=" + addEmail;
        sendEvents = false;
        window.location = "/signup/" + em;
      }, function(err) { $('.form-error').html(err).show();fields.push(err);fields.push(err);});
      return false;
    }
    function showEmail(show) {
      if (show) {
        $('#show-email').slideDown();
        $('#domain-tip').slideDown();
      } else {

      $('.form-error').html('').hide();
      $('.input-container').removeClass('error');
        $('#show-email').slideUp();
        $('#domain-tip').slideUp();
      }
    }
    function goWithEmail() {
      var email = $('#step1_school_email').val();
      if ($('#step1_school_email').hasClass("placeholder")) {
        alert("Please enter your email to continue");
        return;
      }
      PA.call_pj('network.find_school', {email:email}, $('#select_your_school'), function(ret) {
        if (ret.school) {
	        PA.trackEvent(false, "link_to_class_search", "/school-search/", {"searchedWith" : "email"});
          window.location = "/signup/" + ret.school + "?email=" + email;
          return;
        }
        if (ret.domain) {
          domain = ret.domain;
          $('#help-message').hide();
          $('#help-message-error').fadeIn();
          addEmail = email;
          return;
        }
        alert("We couldn't find your school. Please verify your email, or find your school manually.");
      }, function(err) {alert(err);});
    }
    function showCreateSchoolAuto() {
      $('#email-pattern').val(domain);
      if (domain.length > 0)
        $('#email-pattern').removeClass('placeholder');
      showCreateSchool();
      $('#help-message').show();
      $('#help-message-error').hide();
      return false;
    }
    function closeError() {
      $('#help-message').fadeIn();
      $('#help-message-error').hide();
      $('#step1_school_email').focus();
      return false;
    }
</script>
<style type="text/css">
  .box-section {
    position: relative;
    margin-top: 35px;
  }
  .list_header {
    border: 1px solid #DDD;
    border-width: 0 0 1px 0;
    margin-bottom: 15px;
  }
  .list_header p {
    margin: 0;
    font-size: 17px;
    font-weight: bold;
  }
</style>
<body>
	<div id="top">
		<div class="page-container">
			<a id="logo-container" href="/signup"></a>
		</div>
	</div>
  <div id="lower">
		<div class="page-container">
			<div id="lower-content">
				<div id="class-header">
					<h2 id="main-title">Select Your School</h2>
				</div>
				<div id="welcome_message" class="container">
					<p>You can create your school if it does not already exist</p>
				</div>
				
				<div class="box-section clearFix"  id="select_your_school">

				  <div id="inst_message">
            <p class="header">Are you a professor?</p>
            <p>Click here to create &amp; join classes</p>
          </div>

					<div id="side_message">
						<h3>Welcome to Piazza!</h3>
						<p><strong>Piazza is a free platform</strong> for instructors to efficiently manage class Q&amp;A. Students can post questions and collaborate to edit responses to these questions. Instructors can also answer questions, endorse student answers, and edit or delete any posted content.</p> 

<p>Piazza is designed to simulate real class discussion. It aims to get high quality answers to difficult questions, fast!</p>

<p><strong>The name Piazza</strong> comes from the Italian word for plaza--a common city square where people can come together to share knowledge and ideas. We strive to recreate that communal atmosphere among students and instructors.</p>
					</div>
					<div id="SchoolSearchColumn">
						<div class="list_header">
							<p>Search Schools:</p>
						</div>
						<div class="autosuggest">
							<input type="text" id="search-text" name="search-text" placeholder="e.g. My University"/>
							<div class="autosuggest-box" style="display: none;">
								<div class="autosuggest-box-content">
									<a href="#" onclick="return showCreateSchool();" class="add-new">+ Add New School</a>
									<div class="autosuggest-search-by">
										Searching for &quot;<span class="autosuggest-input">Sta</span>&quot;
									</div>
									<ul class="autosuggest-results">
										<a href="#">
											<li class="add-new">+ Add New School</li>
										</a>
									</ul>
								</div>
							</div>
						</div>
              		</div>
              		<p class="next">Next, you'll get to add your classes...</p>
            	</div>

				<div class="box-section" id="create_school" style="display: none;">
					<h2>Create a New School:</h2>
                                          <div class="form-error clearFix"></div>
					<div class="input-container clearFix">
						<div class="form-assist-message">
				      Enter the official name of your institution.
				    </div>
				    <label>School Name:</label>
						<input type="text" id="school-name" name="school-name" />
					</div>
					<div class="input-container clearFix">
						<div class="form-assist-message" id="domain-tip">
				      Enter your institution's email domain (eg. stanford.edu). Avoid entering department specific subdomains (eg. cs.stanford.edu).
				    </div>
				    <div id="show-email">
						  <label>School Email Domain:</label>
              <input type="text" id="email-pattern" name="email-pattern" placeholder="e.g. myschool.edu" style="margin-bottom: 3px;"/>
					  </div>
					  <div class="contained-checkbox" style="margin-top: 10px;">
					    <input type="checkbox" id="with-no-email" onchange="showEmail(!$('#with-no-email').attr('checked'));"/><label for="with-no-email" style="white-space: nowrap;">My school does not have its own email domain.</label>
            </div>
					</div>
					<!--<div class="input-container checkbox clearFix" id="school-email-toggle">
						<input type="checkbox" id="with-no-email" onchange="showEmail(!$('#with-no-email').attr('checked'));"/><label for="with-no-email">My school does not have its own email domain.</label>
						<!-<input type="radio" name="signup_type" id="with-email" checked onclick="showEmail(true);"/> Yes
						&nbsp;&nbsp;<input type="radio" name="signup_type" id="with-no-email" onclick="showEmail(false);"/> No->
					</div>-->
					<!--<div class="input-container clearFix">
						<label>School has its own domain:</label>
						<input type="radio" name="signup_type" id="with-email" checked onclick="showEmail(true);"/> Yes
						&nbsp;&nbsp;<input type="radio" name="signup_type" id="with-no-email" onclick="showEmail(false);"/> No
					</div>-->
					<div class="input-container checkbox clearFix">
						<input type="checkbox" id="terms-check"/>
						<label for="terms-check">You agree to our <a href="/terms_of_use.html" target="_blank">Terms of Use</a> that you are validly affiliated with this institution.</label>
					</div>
          <div class="button-container clearFix" style="margin-top: 10px;">
              <button id="continue-button" onclick="return createSchool();">Continue</button>
              <a href="#" id="cancel-button" onclick="return createSchoolCancel();">Cancel</a>
              <!--<a href="#" class="continue button" onclick="return createSchool();"></a>-->
          </div>
          <div class="bottom-help clearFix">
            Unable to add your school? Email us at team@piazza.com or call us at 1-800-818-4124, and we'll help you get started!
          </div>
				</div>
				<div id="footer">
					Copyright &copy; 2013 Piazza Technologies, Inc. All rights reserved.<br/>
					<ul>
						<li><a href="/legal/privacy">Privacy Policy</a></li>
						<li><a href="/legal/copyright">Copyright Policy</a></li>
						<li><a href="/legal/terms">Terms of Use</a></li>
						<li>Contact us at <strong>team&#64;piazza&#46;com</strong></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</body>
</html>

